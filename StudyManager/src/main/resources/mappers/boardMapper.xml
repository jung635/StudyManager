<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
 <mapper namespace="com.jung.mapper.BoardMapper">
 	<insert id="insertBoard">
 		insert into board (num, name, subject, content, readcount, ip, date, re_lev, re_num, file, fileName, group_num, board_num)
 		values (#{num}, #{name}, #{subject}, #{content}, 0, #{ip}, now(), 0, 0, #{file}, #{fileName}, #{group_num}, #{board_num})
 	</insert>
 	
 	<select id="getMaxNum" resultType="Integer">
 		select max(num) from board
 	</select>
 	
 	<select id="getBoardList" parameterType="map" resultType="com.jung.domain.BoardBean">
 		select * from board
 		where group_num=#{group_num} and board_num=#{board_num}
 		order by date desc
 		limit #{start},#{pageSize}
 	</select>
 	<select id="getBoardListByGroup" parameterType="map" resultType="com.jung.domain.BoardBean">
 		select * from board
 		where group_num=#{group_num}
 		order by date desc
 		limit #{start},#{pageSize}
 	</select>
 	
 	<select id="getListCount" parameterType="map" resultType="Integer">
 		select count(*) from board 
 		where group_num=#{group_num} and board_num=#{board_num}
 	</select>
 	
 	<select id="getListCountByGroup" resultType="Integer">
 		select count(*) from board 
 		where group_num=#{group_num}
 	</select>
 	
 	<select id="getContent" resultType="com.jung.domain.BoardBean">
 		select * from board
 		where num=#{num}
 	</select>
 	
 	<update id="updateBoard">
 		update board set subject = #{subject}, content = #{content}, file = #{file}, ip = #{ip}, fileName=#{fileName} 
 		where num=#{num}
 	</update>
 	
	<update id="updateReadCount">
		update board set readcount = readcount+1 
		where num=#{num}
 	</update>
 	
 	<delete id="deleteBoard">
 		delete from board
 		where num=#{num}
 	</delete>
 	
	<insert id="insertBoardTeam">
 		insert into boardTeam (board_num, group_num, name, write_auth, comment_auth)
 		values (#{board_num}, #{group_num}, #{name}, #{write_auth}, #{comment_auth})
 	</insert>
 	
 	<select id="getMaxNumBoardTeam" resultType="Integer">
 		select max(board_num) from boardTeam
 	</select>
 	
 	<select id="getBoardTeamListByGroup" resultType="com.jung.domain.BoardTeamBean">
 		select * from boardTeam 
 		where group_num=#{group_num}
 	</select>
 	
 </mapper>