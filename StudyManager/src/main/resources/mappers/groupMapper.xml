<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
 <mapper namespace="com.jung.mapper.GroupMapper">
 	<insert id="makeGroup">
 		insert into team (num, name, late_start, late_interval, late_fee, late_max, late_maxFee, fee, board, admin, date)
 		values (#{num}, #{name}, #{late_start}, #{late_interval}, #{late_fee}, #{late_max}, #{late_maxFee}, #{fee}, "notice, free", #{admin}, now())
 	</insert>
 	
 	<select id="getMaxNum" resultType="Integer">
 		select max(num) from team
 	</select>

	<select id="getGroupList" resultType="com.jung.domain.GroupBean">
 		select * from team
 		order by num
 	</select>
 	
	<select id="getGroupDetail" resultType="com.jung.domain.GroupBean">
 		select * from team
 		where num = #{num}
 	</select>
 	
 	<insert id="insertAttendence">
 		insert into attendence (num, group_num, attend_time, date, late_interval, late_fee, fee, id, absent_fee, status)
 		values (#{num}, #{group_num}, now(), now(), #{late_interval}, #{late_fee}, #{fee}, #{id}, #{absent_fee}, #{status})
 	</insert> 
 	
 	<select id="getMaxNumForAttendence" resultType="Integer">
 		select max(num) from attendence
 	</select>
 	
 	<select id="getAttendenceList" resultType="com.jung.domain.AttendenceBean">
 		select * from attendence
 		order by date desc
 	</select>
 	
 	<select id="getAttendenceDetail" resultType="com.jung.domain.AttendenceBean">
 		select * from attendence
 		where id = #{id}
 	</select>
 	
 	<select id="getAttendenceListByDate" resultType="com.jung.domain.AttendenceBean">
 		select * from attendence
 		where date = #{date}
 		order by attend_time desc
 	</select>
 		
 	 	<select id="getAttendenceByDateAndId" parameterType="map" resultType="com.jung.domain.AttendenceBean">
 		select * from attendence
 		where id = #{id} and date = #{date}
 	</select>
 </mapper>